# Ticket Breakdown
We are a staffing company whose primary purpose is to book Agents at Shifts posted by Facilities on our platform. We're working on a new feature which will generate reports for our client Facilities containing info on how many hours each Agent worked in a given quarter by summing up every Shift they worked. Currently, this is how the process works:

- Data is saved in the database in the Facilities, Agents, and Shifts tables
- A function `getShiftsByFacility` is called with the Facility's id, returning all Shifts worked that quarter, including some metadata about the Agent assigned to each
- A function `generateReport` is then called with the list of Shifts. It converts them into a PDF which can be submitted by the Facility for compliance.

## You've been asked to work on a ticket. It reads:

**Currently, the id of each Agent on the reports we generate is their internal database id. We'd like to add the ability for Facilities to save their own custom ids for each Agent they work with and use that id when generating reports for them.**


Based on the information given, break this ticket down into 2-5 individual tickets to perform. Provide as much detail for each ticket as you can, including acceptance criteria, time/effort estimates, and implementation details. Feel free to make informed guesses about any unknown details - you can't guess "wrong".


You will be graded on the level of detail in each ticket, the clarity of the execution plan within and between tickets, and the intelligibility of your language. You don't need to be a native English speaker, but please proof-read your work.

## Your Breakdown Here

### Ticket 1 - Backend: Update Agent Table to include customIds

Description

- As of now, agent table only contains the database internal Id. Every agent should have a custom id which should be added by facilities. To support this, we need to update agent table in the database to support custom Id which is a string field and it's nullable.

Implementation Details

- Add a new column to agent table.
- Update the API to handle customId field.
- Custom Id for every agent should be unique

Finish Line (Acceptance Criteria)

- Agent table should have custom Id of type string and non nullable.

Story Point Estimate

- 2 story point having time estimate of 4 hours.


### Ticket 2 - UI: Support Facilities to add customIds to agent

Description

- We need to provide a UI so that facilities can update the customId for every agent.

Implementation details

- In the current UI, where facilities manage their agents, we need to add one more field where facilities can update the customId for every agent.

- Provide a input field called `Custom Id`

- Handle the API payload when sending customId to server.

- Once the request is made, handle the GET request and add the custom Id in view screen.

Finish Line (Acceptance Criteria)

- Facilities should be able to add custom Ids to agent.

Story Point Estimate

- 3 story points with time estimate of 5-6 hours.


### Ticket 3 - UI: Nudge facilities to update custom Id for agents

Description

- This ticket needs to be done after Ticket#1 and Ticket#2 are done, Since facilities already has number of agents present in the system before we added support for custom Id, we need to nudge facilities to update the custom Id after this feature is available

Implementation details

- In the UI where facilities manage their agents, add a info alert to update custom Id for agents

- Once they click on Edit button for a agent which don't have custom id, Custom Id field should be empty and facilities should be able to add custom Id and save it

- Handle Edit API payload and send the edited response to server

Finish Line

- Facilities should be able to add custom Id for older agents in the system

Story Point Estimate

- 3 story points with time estimate of 5-6 hours.


### Ticket 4 - Backend: Include the custom Id as meta data in function getShiftsByFacility

Description

- Currently, our function `getShiftsByFacility` has some agent meta data which doesn't include custom Id, we need to add `customId` as meta data in function response

Implementation Details

- Update the meta object to include customId fetched from database

- Return the updated object

- Update tests if any

Finish Line

- `getShiftsByFacility` should have custom Id as meta data

Story Point Estimate

- 2 story points with time estimate of 2-3 hours.

### Ticket 5 - Backend: Update the function generateReport and PDF to include custom Id

Description

- With the support of custom Id for agents, our PDF needs to be updated which is generated by using `generateReport`

Implementation Details

- While fetching data from `generateReport` include the customId for every agent

- Handle custom Id in the PDF and show it in the PDF

Finish Line

- PDF should be updated with custom Id

Story Point Estimate

- 2 story points with time estimate of 2-3 hours.